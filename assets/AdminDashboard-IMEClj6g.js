import{n as e}from"./rolldown-runtime-y2wrX6ue.js";import{h as t,t as n}from"./vendor-BU0KcxK_.js";var r=e(t()),i=e(n()),a=`/home/esadmin/personal/portfolio-sites/verdant-webworks/src/Components/Admin/DashboardHeader.tsx`;function o(){return(0,i.jsxDEV)(`header`,{className:`dash-header`,children:[(0,i.jsxDEV)(`h1`,{children:`Admin Dashboard`},void 0,!1,{fileName:a,lineNumber:4,columnNumber:7},this),(0,i.jsxDEV)(`div`,{className:`dash-actions`},void 0,!1,{fileName:a,lineNumber:5,columnNumber:7},this)]},void 0,!0,{fileName:a,lineNumber:3,columnNumber:5},this)}var s=e(n()),c=`/home/esadmin/personal/portfolio-sites/verdant-webworks/src/Components/Admin/DashboardSummary.tsx`;function l(){let[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{let e=await(await fetch(`http://localhost:3001/api/dashboard/summary`)).json();e.success&&t(e.data)}finally{i(!1)}})()},[]),n?(0,s.jsxDEV)(`div`,{className:`summary`,children:`Loading summary…`},void 0,!1,{fileName:c,lineNumber:31,columnNumber:23},this):e?(0,s.jsxDEV)(`section`,{className:`summary`,children:[(0,s.jsxDEV)(`div`,{className:`card`,children:[(0,s.jsxDEV)(`div`,{className:`label`,children:`Customers`},void 0,!1,{fileName:c,lineNumber:37,columnNumber:9},this),(0,s.jsxDEV)(`div`,{className:`value`,children:e.total_customers},void 0,!1,{fileName:c,lineNumber:38,columnNumber:9},this)]},void 0,!0,{fileName:c,lineNumber:36,columnNumber:7},this),(0,s.jsxDEV)(`div`,{className:`card`,children:[(0,s.jsxDEV)(`div`,{className:`label`,children:`Submissions`},void 0,!1,{fileName:c,lineNumber:41,columnNumber:9},this),(0,s.jsxDEV)(`div`,{className:`value`,children:e.total_submissions},void 0,!1,{fileName:c,lineNumber:42,columnNumber:9},this)]},void 0,!0,{fileName:c,lineNumber:40,columnNumber:7},this),(0,s.jsxDEV)(`div`,{className:`card`,children:[(0,s.jsxDEV)(`div`,{className:`label`,children:`New`},void 0,!1,{fileName:c,lineNumber:45,columnNumber:9},this),(0,s.jsxDEV)(`div`,{className:`value`,children:e.new_submissions},void 0,!1,{fileName:c,lineNumber:46,columnNumber:9},this)]},void 0,!0,{fileName:c,lineNumber:44,columnNumber:7},this),(0,s.jsxDEV)(`div`,{className:`card`,children:[(0,s.jsxDEV)(`div`,{className:`label`,children:`Qualified`},void 0,!1,{fileName:c,lineNumber:49,columnNumber:9},this),(0,s.jsxDEV)(`div`,{className:`value`,children:e.qualified_leads},void 0,!1,{fileName:c,lineNumber:50,columnNumber:9},this)]},void 0,!0,{fileName:c,lineNumber:48,columnNumber:7},this),(0,s.jsxDEV)(`div`,{className:`card`,children:[(0,s.jsxDEV)(`div`,{className:`label`,children:`Closed Won`},void 0,!1,{fileName:c,lineNumber:53,columnNumber:9},this),(0,s.jsxDEV)(`div`,{className:`value`,children:e.closed_won},void 0,!1,{fileName:c,lineNumber:54,columnNumber:9},this)]},void 0,!0,{fileName:c,lineNumber:52,columnNumber:7},this),(0,s.jsxDEV)(`div`,{className:`card`,children:[(0,s.jsxDEV)(`div`,{className:`label`,children:`Revenue`},void 0,!1,{fileName:c,lineNumber:57,columnNumber:9},this),(0,s.jsxDEV)(`div`,{className:`value`,children:[`$`,e.total_revenue??0]},void 0,!0,{fileName:c,lineNumber:58,columnNumber:9},this)]},void 0,!0,{fileName:c,lineNumber:56,columnNumber:7},this),(0,s.jsxDEV)(`div`,{className:`card`,children:[(0,s.jsxDEV)(`div`,{className:`label`,children:`Pipeline`},void 0,!1,{fileName:c,lineNumber:61,columnNumber:9},this),(0,s.jsxDEV)(`div`,{className:`value`,children:[`$`,e.pipeline_value??0]},void 0,!0,{fileName:c,lineNumber:62,columnNumber:9},this)]},void 0,!0,{fileName:c,lineNumber:60,columnNumber:7},this)]},void 0,!0,{fileName:c,lineNumber:35,columnNumber:5},this):null}var u=e(n()),d=`/home/esadmin/personal/portfolio-sites/verdant-webworks/src/Components/Admin/CustomerTable.tsx`;function f({customers:e,onSelectCustomer:t,onStatusChange:n}){return(0,u.jsxDEV)(`table`,{className:`table`,children:[(0,u.jsxDEV)(`thead`,{children:(0,u.jsxDEV)(`tr`,{children:[(0,u.jsxDEV)(`th`,{children:`Name`},void 0,!1,{fileName:d,lineNumber:16,columnNumber:11},this),(0,u.jsxDEV)(`th`,{children:`Email`},void 0,!1,{fileName:d,lineNumber:17,columnNumber:11},this),(0,u.jsxDEV)(`th`,{children:`Type`},void 0,!1,{fileName:d,lineNumber:18,columnNumber:11},this),(0,u.jsxDEV)(`th`,{children:`Status`},void 0,!1,{fileName:d,lineNumber:19,columnNumber:11},this),(0,u.jsxDEV)(`th`,{children:`Created`},void 0,!1,{fileName:d,lineNumber:20,columnNumber:11},this),(0,u.jsxDEV)(`th`,{children:`Actions`},void 0,!1,{fileName:d,lineNumber:21,columnNumber:11},this)]},void 0,!0,{fileName:d,lineNumber:15,columnNumber:9},this)},void 0,!1,{fileName:d,lineNumber:14,columnNumber:7},this),(0,u.jsxDEV)(`tbody`,{children:e.map(e=>(0,u.jsxDEV)(`tr`,{children:[(0,u.jsxDEV)(`td`,{children:(0,u.jsxDEV)(`button`,{className:`link`,onClick:()=>t(e.id),children:[e.first_name,` `,e.last_name]},void 0,!0,{fileName:d,lineNumber:28,columnNumber:15},this)},void 0,!1,{fileName:d,lineNumber:27,columnNumber:13},this),(0,u.jsxDEV)(`td`,{children:e.email},void 0,!1,{fileName:d,lineNumber:32,columnNumber:13},this),(0,u.jsxDEV)(`td`,{children:e.latest_submission_type??`-`},void 0,!1,{fileName:d,lineNumber:33,columnNumber:13},this),(0,u.jsxDEV)(`td`,{children:e.latest_submission_id?(0,u.jsxDEV)(`select`,{value:e.latest_submission_status??`new`,onChange:t=>n(e.latest_submission_id,t.target.value),children:[(0,u.jsxDEV)(`option`,{value:`new`,children:`New`},void 0,!1,{fileName:d,lineNumber:42,columnNumber:19},this),(0,u.jsxDEV)(`option`,{value:`contacted`,children:`Contacted`},void 0,!1,{fileName:d,lineNumber:43,columnNumber:19},this),(0,u.jsxDEV)(`option`,{value:`qualified`,children:`Qualified`},void 0,!1,{fileName:d,lineNumber:44,columnNumber:19},this),(0,u.jsxDEV)(`option`,{value:`proposal_sent`,children:`Proposal Sent`},void 0,!1,{fileName:d,lineNumber:45,columnNumber:19},this),(0,u.jsxDEV)(`option`,{value:`negotiating`,children:`Negotiating`},void 0,!1,{fileName:d,lineNumber:46,columnNumber:19},this),(0,u.jsxDEV)(`option`,{value:`closed_won`,children:`Closed Won`},void 0,!1,{fileName:d,lineNumber:47,columnNumber:19},this),(0,u.jsxDEV)(`option`,{value:`closed_lost`,children:`Closed Lost`},void 0,!1,{fileName:d,lineNumber:48,columnNumber:19},this),(0,u.jsxDEV)(`option`,{value:`on_hold`,children:`On Hold`},void 0,!1,{fileName:d,lineNumber:49,columnNumber:19},this)]},void 0,!0,{fileName:d,lineNumber:36,columnNumber:17},this):`-`},void 0,!1,{fileName:d,lineNumber:34,columnNumber:13},this),(0,u.jsxDEV)(`td`,{children:e.submission_created_at?new Date(e.submission_created_at).toLocaleString():`-`},void 0,!1,{fileName:d,lineNumber:55,columnNumber:13},this),(0,u.jsxDEV)(`td`,{children:(0,u.jsxDEV)(`button`,{className:`btn`,onClick:()=>t(e.id),children:`View`},void 0,!1,{fileName:d,lineNumber:61,columnNumber:15},this)},void 0,!1,{fileName:d,lineNumber:60,columnNumber:13},this)]},e.id,!0,{fileName:d,lineNumber:26,columnNumber:11},this))},void 0,!1,{fileName:d,lineNumber:24,columnNumber:7},this)]},void 0,!0,{fileName:d,lineNumber:13,columnNumber:5},this)}var p=e(n()),m=`/home/esadmin/personal/portfolio-sites/verdant-webworks/src/Components/Admin/CustomerDetailModal.tsx`;function h({customerId:e,onClose:t,onUpdate:n}){let[i,a]=(0,r.useState)(null),[o,s]=(0,r.useState)([]),[c,l]=(0,r.useState)([]),[u,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{d(!0);let t=await(await fetch(`http://localhost:3001/api/dashboard/customers/${e}`)).json();t.success&&(a(t.data.customer),s(t.data.submissions),l(t.data.activities)),d(!1)})()},[e]),i?(0,p.jsxDEV)(`div`,{className:`modal-backdrop`,onClick:t,children:(0,p.jsxDEV)(`div`,{className:`modal`,onClick:e=>e.stopPropagation(),children:[(0,p.jsxDEV)(`div`,{className:`modal-header`,children:[(0,p.jsxDEV)(`h3`,{children:[i.first_name,` `,i.last_name]},void 0,!0,{fileName:m,lineNumber:63,columnNumber:11},this),(0,p.jsxDEV)(`button`,{className:`close`,onClick:t,children:`✕`},void 0,!1,{fileName:m,lineNumber:66,columnNumber:11},this)]},void 0,!0,{fileName:m,lineNumber:62,columnNumber:9},this),u?(0,p.jsxDEV)(`div`,{children:`Loading…`},void 0,!1,{fileName:m,lineNumber:71,columnNumber:11},this):(0,p.jsxDEV)(`div`,{className:`modal-body`,children:[(0,p.jsxDEV)(`div`,{className:`section`,children:[(0,p.jsxDEV)(`div`,{children:[`Email: `,i.email]},void 0,!0,{fileName:m,lineNumber:75,columnNumber:15},this),i.phone&&(0,p.jsxDEV)(`div`,{children:[`Phone: `,i.phone]},void 0,!0,{fileName:m,lineNumber:76,columnNumber:34},this)]},void 0,!0,{fileName:m,lineNumber:74,columnNumber:13},this),(0,p.jsxDEV)(`div`,{className:`section`,children:[(0,p.jsxDEV)(`h4`,{children:`Submissions`},void 0,!1,{fileName:m,lineNumber:80,columnNumber:15},this),(0,p.jsxDEV)(`ul`,{className:`list`,children:o.map(e=>(0,p.jsxDEV)(`li`,{children:[(0,p.jsxDEV)(`strong`,{children:e.type},void 0,!1,{fileName:m,lineNumber:84,columnNumber:21},this),` • `,e.status,` •`,` `,new Date(e.created_at).toLocaleString(),e.message?(0,p.jsxDEV)(`div`,{className:`muted`,children:e.message},void 0,!1,{fileName:m,lineNumber:87,columnNumber:23},this):null]},e.id,!0,{fileName:m,lineNumber:83,columnNumber:19},this))},void 0,!1,{fileName:m,lineNumber:81,columnNumber:15},this)]},void 0,!0,{fileName:m,lineNumber:79,columnNumber:13},this),(0,p.jsxDEV)(`div`,{className:`section`,children:[(0,p.jsxDEV)(`h4`,{children:`Activity`},void 0,!1,{fileName:m,lineNumber:95,columnNumber:15},this),(0,p.jsxDEV)(`ul`,{className:`list`,children:c.map(e=>(0,p.jsxDEV)(`li`,{children:[(0,p.jsxDEV)(`strong`,{children:e.activity_type},void 0,!1,{fileName:m,lineNumber:99,columnNumber:21},this),` • `,e.description,` •`,` `,new Date(e.created_at).toLocaleString()]},e.id,!0,{fileName:m,lineNumber:98,columnNumber:19},this))},void 0,!1,{fileName:m,lineNumber:96,columnNumber:15},this)]},void 0,!0,{fileName:m,lineNumber:94,columnNumber:13},this)]},void 0,!0,{fileName:m,lineNumber:73,columnNumber:11},this),(0,p.jsxDEV)(`div`,{className:`modal-footer`,children:[(0,p.jsxDEV)(`button`,{className:`btn`,onClick:n,children:`Refresh`},void 0,!1,{fileName:m,lineNumber:108,columnNumber:11},this),(0,p.jsxDEV)(`button`,{className:`btn`,onClick:t,children:`Close`},void 0,!1,{fileName:m,lineNumber:111,columnNumber:11},this)]},void 0,!0,{fileName:m,lineNumber:107,columnNumber:9},this)]},void 0,!0,{fileName:m,lineNumber:61,columnNumber:7},this)},void 0,!1,{fileName:m,lineNumber:60,columnNumber:5},this):null}var g=e(n()),_=`/home/esadmin/personal/portfolio-sites/verdant-webworks/src/pages/AdminDashboard.tsx`;function v(){let[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[a,s]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[d,p]=(0,r.useState)(`all`),[m,v]=(0,r.useState)(`all`),[y,b]=(0,r.useState)(``),x=(0,r.useCallback)(async()=>{i(!0);try{let e=new URLSearchParams;d!==`all`&&e.append(`status`,d),m!==`all`&&e.append(`type`,m),y&&e.append(`search`,y);let n=await(await fetch(`http://localhost:3001/api/dashboard/customers?${e}`)).json();n.success?t(n.data):s(n.error||`Failed to load customers`)}catch{s(`Failed to connect to server`)}finally{i(!1)}},[d,m,y]);return(0,r.useEffect)(()=>{x()},[x]),(0,g.jsxDEV)(`div`,{className:`admin-dashboard`,children:[(0,g.jsxDEV)(o,{},void 0,!1,{fileName:_,lineNumber:75,columnNumber:7},this),(0,g.jsxDEV)(`div`,{className:`dashboard-container`,children:[(0,g.jsxDEV)(l,{},void 0,!1,{fileName:_,lineNumber:78,columnNumber:9},this),(0,g.jsxDEV)(`div`,{className:`dashboard-filters`,children:[(0,g.jsxDEV)(`input`,{type:`text`,placeholder:`Search customers...`,value:y,onChange:e=>b(e.target.value),className:`search-input`},void 0,!1,{fileName:_,lineNumber:81,columnNumber:11},this),(0,g.jsxDEV)(`select`,{value:d,onChange:e=>p(e.target.value),className:`filter-select`,children:[(0,g.jsxDEV)(`option`,{value:`all`,children:`All Status`},void 0,!1,{fileName:_,lineNumber:94,columnNumber:13},this),(0,g.jsxDEV)(`option`,{value:`new`,children:`New`},void 0,!1,{fileName:_,lineNumber:95,columnNumber:13},this),(0,g.jsxDEV)(`option`,{value:`contacted`,children:`Contacted`},void 0,!1,{fileName:_,lineNumber:96,columnNumber:13},this),(0,g.jsxDEV)(`option`,{value:`qualified`,children:`Qualified`},void 0,!1,{fileName:_,lineNumber:97,columnNumber:13},this),(0,g.jsxDEV)(`option`,{value:`proposal_sent`,children:`Proposal Sent`},void 0,!1,{fileName:_,lineNumber:98,columnNumber:13},this),(0,g.jsxDEV)(`option`,{value:`negotiating`,children:`Negotiating`},void 0,!1,{fileName:_,lineNumber:99,columnNumber:13},this),(0,g.jsxDEV)(`option`,{value:`closed_won`,children:`Closed Won`},void 0,!1,{fileName:_,lineNumber:100,columnNumber:13},this),(0,g.jsxDEV)(`option`,{value:`closed_lost`,children:`Closed Lost`},void 0,!1,{fileName:_,lineNumber:101,columnNumber:13},this),(0,g.jsxDEV)(`option`,{value:`on_hold`,children:`On Hold`},void 0,!1,{fileName:_,lineNumber:102,columnNumber:13},this)]},void 0,!0,{fileName:_,lineNumber:89,columnNumber:11},this),(0,g.jsxDEV)(`select`,{value:m,onChange:e=>v(e.target.value),className:`filter-select`,children:[(0,g.jsxDEV)(`option`,{value:`all`,children:`All Types`},void 0,!1,{fileName:_,lineNumber:110,columnNumber:13},this),(0,g.jsxDEV)(`option`,{value:`contact`,children:`Contact`},void 0,!1,{fileName:_,lineNumber:111,columnNumber:13},this),(0,g.jsxDEV)(`option`,{value:`get_started`,children:`Get Started`},void 0,!1,{fileName:_,lineNumber:112,columnNumber:13},this)]},void 0,!0,{fileName:_,lineNumber:105,columnNumber:11},this),(0,g.jsxDEV)(`button`,{onClick:x,className:`refresh-button`,children:[(0,g.jsxDEV)(`i`,{className:`fa-solid fa-rotate`},void 0,!1,{fileName:_,lineNumber:116,columnNumber:13},this),` Refresh`]},void 0,!0,{fileName:_,lineNumber:115,columnNumber:11},this)]},void 0,!0,{fileName:_,lineNumber:80,columnNumber:9},this),n&&(0,g.jsxDEV)(`div`,{className:`loading`,children:`Loading customers...`},void 0,!1,{fileName:_,lineNumber:120,columnNumber:21},this),a&&(0,g.jsxDEV)(`div`,{className:`error`,children:a},void 0,!1,{fileName:_,lineNumber:121,columnNumber:19},this),!n&&!a&&(0,g.jsxDEV)(f,{customers:e,onSelectCustomer:u,onStatusChange:async(e,t)=>{try{(await fetch(`http://localhost:3001/api/dashboard/submissions/${e}`,{method:`PATCH`,headers:{"Content-Type":`application/json`},body:JSON.stringify({status:t})})).ok&&x()}catch(e){console.error(`Failed to update status:`,e)}}},void 0,!1,{fileName:_,lineNumber:124,columnNumber:11},this),c&&(0,g.jsxDEV)(h,{customerId:c,onClose:()=>u(null),onUpdate:x},void 0,!1,{fileName:_,lineNumber:132,columnNumber:11},this)]},void 0,!0,{fileName:_,lineNumber:77,columnNumber:7},this)]},void 0,!0,{fileName:_,lineNumber:74,columnNumber:5},this)}export{v as AdminDashboard};